(this.webpackJsonpsea_fight=this.webpackJsonpsea_fight||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(6),i=a.n(r),c=(a(12),a(1)),u=a(2),l=a(4),m=a(3),o=(a(13),function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={name:""},e.handleChange=function(t){e.setState({name:t.target.value})},e.handleSubmit=function(){if(""!==e.state.name)return e.props.getUserName(e.state.name)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"nameRequest"},n.a.createElement("div",{className:"form"},n.a.createElement("div",{className:"form__item"},n.a.createElement("label",{className:"form__item-label"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f"),n.a.createElement("input",{onChange:function(t){e.handleChange(t)},className:"form__item-field",maxLength:"30"}))),n.a.createElement("div",{className:"submit-container"},n.a.createElement("button",{className:"submit_button",onClick:this.handleSubmit},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"),n.a.createElement("p",{className:"error_message"},this.state.error)))}}]),a}(n.a.Component));function p(e){return"M"===e.value?n.a.createElement("div",{className:"square",onClick:e.onClick},n.a.createElement("div",{className:"dot"})):n.a.createElement("div",{className:e.shipType&&"user"===e.type?"square square-ship":"square",onClick:e.onClick},e.value)}var h=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"renderSquare",value:function(e,t){var a=this;return"system"===this.props.type?n.a.createElement(p,{key:10*e+t,shipType:this.props.ships[e][t],type:this.props.type,value:this.props.squares[e][t],onClick:function(){return a.props.onClick(e,t)}}):n.a.createElement(p,{key:10*e+t,shipType:this.props.ships[e][t],type:this.props.type,value:this.props.squares[e][t]})}},{key:"render",value:function(){var e=this,t=[1,2,3,4,5,6,7,8,9,10];return n.a.createElement("div",{className:"board"},n.a.createElement("div",{className:"column__coordinates"},["A","\u0411","\u0412","\u0413","\u0414","\u0415","\u0416","\u0417","\u0418","\u041a"].map((function(e,t){return n.a.createElement("div",{key:t,className:"coordinate__column-item"},e)}))),n.a.createElement("div",null,t.map((function(e,t){return n.a.createElement("div",{key:t,className:"coordinate__row-item"},e)})),n.a.createElement("div",{className:"squares"},t.map((function(a,s){return n.a.createElement("div",{key:s,className:"board-row"},t.map((function(t,a){return e.renderSquare(s,a)})))})))))}}]),a}(n.a.Component),f=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).handleClick=function(e,t,a){var n=!0,r=s.state._systemSquares.slice();s.state._systemShips[e][t]?(s.incrementPlayerScore("user"),r[e][t]="X",s.checkGameResult("user")||s.setState({status:"\u0412\u044b \u043f\u043e\u043f\u0430\u043b\u0438. ".concat(s.state.user_name,", \u0432\u0430\u0448 \u0445\u043e\u0434.")}),n=!1):(r[e][t]="M",s.setState({status:"\u0412\u044b \u043f\u0440\u043e\u043c\u0430\u0445\u043d\u0443\u043b\u0438\u0441\u044c. \u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u0441\u0442\u0440\u0435\u043b\u044f\u0435\u0442"}));s.setState({_systemSquares:r}),n&&setTimeout((function(){s.makeSystemMove(s.state._userSquares.slice())}),1e3)},s.makeSystemMove=function(e){var t,a,n=!1;if(t=s.getRandom(9),a=s.getRandom(9),e[t][a])return s.makeSystemMove(e);s.state._userShips[t][a]?(s.incrementPlayerScore("system"),s.setState({status:"\u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u043f\u043e\u043f\u0430\u043b \u0432 \u0432\u0430\u0448 \u043a\u043e\u0440\u0430\u0431\u043b\u044c. \u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u0441\u0442\u0440\u0435\u043b\u044f\u0435\u0442."}),e[t][a]="X",s.checkGameResult("system")||(n=!0)):(e[t][a]="M",s.setState({status:"\u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u043f\u0440\u043e\u043c\u0430\u0445\u043d\u0443\u043b\u0441\u044f. ".concat(s.state.user_name,", \u0432\u0430\u0448 \u0432\u044b\u0441\u0442\u0440\u0435\u043b.")})),s.setState({_userSquares:e}),n&&setTimeout((function(){s.makeSystemMove(e)}),1e3)},s.incrementPlayerScore=function(e){"user"===e?s.setState({userScore:s.state.userScore+1}):s.setState({systemScore:s.state.systemScore+1})},s.checkGameResult=function(e){return"user"===e?s.state.userScore+1===20&&(s.setState({isGameEnded:!0,finalStatus:"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c, ".concat(s.state.user_name,"! \u0412\u044b \u0432\u044b\u0438\u0433\u0440\u0430\u043b\u0438")}),!0):20===s.state.systemScore&&(s.setState({isGameEnded:!0,finalStatus:"\u0412\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438."}),!0)},s.shipsData=["",[4,"\u0447\u0435\u0442\u044b\u0440\u0435\u0445\u043f\u0430\u043b\u0443\u0431\u043d\u0438\u043a"],[3,"\u0442\u0440\u0435\u0445\u043f\u0430\u043b\u0443\u0431\u043d\u0438\u043a"],[2,"\u0434\u0432\u0443\u0445\u043f\u0430\u043b\u0443\u0431\u043d\u0438\u043a"],[1,"\u043e\u0434\u043d\u043e\u043f\u0430\u043b\u0443\u0431\u043d\u0438\u043a"]],s.componentDidMount=function(){s.locateShipsRandomly("user"),s.locateShipsRandomly("system")},s.locateShipsRandomly=function(e){var t;t="user"===e?s.state._userShips.map((function(e){return e.slice()})):s.state._systemShips.map((function(e){return e.slice()}));for(var a=1,n=s.shipsData.length;a<n;a++)for(var r=s.shipsData[a][0],i=s.shipsData[a][1],c=0;c<a;c++)s.locateShip(r,i,t,e)},s.getRandom=function(e){return Math.floor(Math.random()*(e+1))},s.locateShip=function(e,t,a,n){var r,i,c=s.getRandom(1),u=0===c?1:0;if(0===c?(r=s.getRandom(9),i=s.getRandom(10-e)):(r=s.getRandom(10-e),i=s.getRandom(9)),!s.checkLocationShip(r,i,c,u,e,a))return s.locateShip(e,t,a,n);if(0===c)for(var l=0;l<e;l++)a[r][i+l]=t;else for(var m=0;m<e;m++)a[r+m][i]=t;"user"===n?s.setState({_userShips:a}):s.setState({_systemShips:a})},s.state={_userSquares:Array(10).fill(null).map((function(e){return new Array(10).fill(null)})),_systemSquares:Array(10).fill(null).map((function(e){return new Array(10).fill(null)})),_userShips:Array(10).fill(null).map((function(e){return new Array(10).fill(null)})),_systemShips:Array(10).fill(null).map((function(e){return new Array(10).fill(null)})),userScore:0,systemScore:0,status:"\u0412\u0430\u0448 \u0445\u043e\u0434",finalStatus:"",user_name:s.props.name,isGameEnded:!1},s}return Object(u.a)(a,[{key:"checkLocationShip",value:function(e,t,a,s,n,r){var i,c,u;e+a*n===10&&1===a&&(i=e+n),e+a*n<10&&1===a&&(i=e+n+1),9===e&&0===a&&(i=e+1),e<9&&0===a&&(i=e+2),c=0===t?t:t-1,t+s*n===10&&1===s&&(u=t+n),t+s*n<10&&1===s&&(u=t+n+1),9===t&&0===s&&(u=t+1),t<9&&0===s&&(u=t+2);for(var l=0===e?e:e-1;l<i;l++)for(var m=c;m<u;m++)if(r[l][m])return!1;return!0}},{key:"render",value:function(){var e=this,t=function(){return e.state.isGameEnded?n.a.createElement("button",{className:"submit_button",onClick:e.props.startAgainFunction},"\u041d\u0430\u0447\u0430\u0442\u044c \u0441\u043d\u0430\u0447\u0430\u043b\u0430"):""},a=function(){return e.state.isGameEnded?n.a.createElement("div",{className:"game-boards"},n.a.createElement(h,{ships:e.state._userShips,squares:e.state._userSquares,type:"user",onClick:function(){}}),n.a.createElement(h,{ships:e.state._systemShips,squares:e.state._systemSquares,type:"system",onClick:function(){}})):n.a.createElement("div",{className:"game-boards"},n.a.createElement(h,{ships:e.state._userShips,squares:e.state._userSquares,type:"user"}),n.a.createElement(h,{ships:e.state._systemShips,squares:e.state._systemSquares,type:"system",onClick:function(t,a){return e.handleClick(t,a)}}))},s=this.state.isGameEnded?this.state.finalStatus:this.state.status;return n.a.createElement("div",{className:"game"},n.a.createElement("div",{className:"game-info"},"\u041c\u043e\u0440\u0441\u043a\u043e\u0439 \u0431\u043e\u0439"),n.a.createElement("div",{className:"game-space"},n.a.createElement(a,null),n.a.createElement("div",{className:"game-info"},n.a.createElement("div",null,s)),n.a.createElement("div",{className:"game-info"},n.a.createElement(t,null))))}}]),a}(n.a.Component),d=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).getUserName=function(e){s.setState({user:e})},s.startAgain=function(){s.setState({date:s.getDate()})},s.getDate=function(){return Date.now()},s.state={user:"",date:""},s}return Object(u.a)(a,[{key:"render",value:function(){return this.state.user?n.a.createElement(f,{name:this.state.user,key:this.state.date,startAgainFunction:this.startAgain}):n.a.createElement(o,{getUserName:this.getUserName})}}]),a}(s.Component);i.a.render(n.a.createElement(d,null),document.getElementById("root"))},7:function(e,t,a){e.exports=a(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.0f87bed0.chunk.js.map